<?phpif (!defined('AREA')) {    die('Access denied');}?><link rel="stylesheet" href="<?php echo AppObject::getBaseFile('app/exam_room/css/dataTables.bootstrap.css') ?>"><link rel="stylesheet" href="<?php echo AppObject::getBaseFile('app/exam_room/css/style.css') ?>"><script src="<?php echo AppObject::getBaseFile('app/exam_room/js/jquery.dataTables.min.js') ?>"></script><script src="<?php echo AppObject::getBaseFile('app/exam_room/js/dataTables.bootstrap.js') ?>"></script><script src="<?php echo AppObject::getBaseFile('app/exam_room/js/fnAddTr.js') ?>"></script><script src="<?php echo AppObject::getBaseFile('app/exam_room/js/scripts.js') ?>"></script><script src="<?php echo AppObject::getBaseFile('app/exam_room/js/jquery.mask.min.js') ?>"></script><script src="<?php echo AppObject::getBaseFile('app/exam_room/js/jquery.download.js') ?>"></script><!-- hidden --><input type="hidden" name="split_type" id="split_type" value="0" /><input type="hidden" name="hdd_all_room" id="hdd_all_room" value="<?= $this->arr_all_room ?>" /><!-- col-sm-4 --><div class="col-sm-2">    <div class="well">        <form class="form" role="form" id="form_filter" >            <div class="form-group" >                <label for="" class="control-label">Chọn khóa:</label>                <select name="sel_course" id="sel_course" class="form-control input-sm sel_filter">                    <option value="0">-Tất cả-</option>                    <?php                    foreach ($this->arr_course as $key => $value) {                        ?>                        <option value="<?= $key ?>"><?= $value ?></option>                    <?php } ?>                </select>            </div>            <div class="form-group" >                <label for="" class="control-label">Chọn đợt thi:</label>                <select name="sel_exam" id="sel_exam" class="form-control input-sm sel_filter">                    <option value="0">- Tất cả -</option>                </select>            </div>            <div class="form-group" >                <label for="" class="control-label">Chọn môn thi:</label>                <select name="sel_subject" id="sel_subject" class="form-control input-sm sel_filter">                    <option value="0">-Tất cả-</option>                </select>            </div>            <div class="form-group" >                <label for="" class="control-label">Chọn danh sách thi:</label>                <select name="sel_exam_list" id="sel_exam_list" class="form-control input-sm sel_filter">                    <option value="0">-Tất cả-</option>                </select>            </div>        </form>    </div>      <div class="well">        <table id="action_table_1" class="table .table-striped">            <tr>                <td><label for="" class="control-label">Danh sách thi:</label></td>                <td><label id="lbl_exam_list" for="" class="control-label"></label></td>            </tr>            <tr>                <td><label for="" class="control-label">Số thí sinh:</label></td>                <td><input type="text" id="txt_num_student" value="0" readonly="true"/></td>            </tr>            <tr>                <td><label for="" class="control-label">Hình thức thi:</label></td>                <td>                    <label for="" id="lbl_exam_type"  class="control-label"></label>                    <input type="hidden" id="hdd_exam_type" value="0" readonly="true"/>                </td>            </tr>        </table>    </div></div><!-- col-sm-4 --><div class="col-sm-3">    <div class="panel-group" id="accordion" role="tablist" >        <!-- Chia phòng tự động -->        <div class="panel panel-warning">            <div class="panel-heading" role="tab" id="headingOne">                <h4 class="panel-title">                    <a class="collapseOne" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">                        Chia phòng tự động                    </a>                </h4>            </div>            <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">                <div class="panel-body">                    <form class="form" role="form" id="form_filter" >                        <label for="" class="control-label">Số phòng cần chia:</label>                        <input type="number" class="form-control" name="num_room_auto" value="0" id="num_room_auto"  />                    </form>                </div>            </div>        </div>        <!-- Chia phòng thủ công-->        <div class="panel panel-warning">            <div class="panel-heading" role="tab" id="headingOne">                <h4 class="panel-title">                    <a class="collapseTwo" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">                        Chia phòng thủ công                    </a>                </h4>            </div>            <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">                <table class="action_table table">                    <tbody>                        <tr >                            <td>                                <label for="num_rom_hand" class="control-label">Số phòng cần chia:</label>                                <input type="number" class="form-control" name="num_room_hand" value="0" id="num_room_hand"  />                            </td>                        </tr>                    </tbody>                </table>            </div>        </div>    </div>    <!-- action table -->    <div class="well">        <table class="action_table table">            <tbody>                <tr align="center">                    <td>                        <button id="btn_split" class="btn btn-xs btn-success"><i class="glyphicon glyphicon-align-justify"></i> Chia phòng</button>                    </td>                    <td>                        <button id="btn_save_room" class="btn btn-xs btn-warning" ><i class="glyphicon glyphicon-floppy-disk"></i> Lưu </button>                    </td>                    <td>                        <button id="btn_print" class="btn btn-xs btn-primary" data-toggle="modal" data-target="#print_option_box" ><i class="glyphicon glyphicon-print"></i> In danh sách</button>                    </td>                </tr>            </tbody>        </table>    </div>    <!-- Danh sách phòng thi -->    <div class="panel panel-info">        <div class="panel-heading">            <h4>Danh sách phòng thi</h4>        </div>        <div class="panel-body">            <div class="auto_scroll " id="">                <table id="tbl_room_list" class="table table-striped table-hover" data-toggle="table" data-height="550">                    <thead>                    </thead>                    <tbody></tbody>                </table>            </div><!-- /.auto_scroll -->        </div>    </div></div><!-- Danh sách chi tiết phòng thi --><div class="col-sm-6">    <div class="panel panel-primary">        <div class="panel-heading">            <h4>Danh sách sinh viên trong phòng</h4>        </div>        <div class="panel-body">            <div class="well">                <div class="auto_scroll " id="table_room"><!--                    <table id="table_student" class="table table-striped table_student" data-toggle="table" data-height="550">                        <thead>                             <tr class="row_title">                                <th colspan="5" id="th_num_room">Phòng thi số: </th>                            </tr>                            <tr>                                <th>STT</th>                                <th>Mã SV</th>                                <th>Họ</th>                                <th>Tên</th>                                <th>Ngày sinh</th>                            </tr>                        </thead>                        <tbody></tbody>                    </table>-->                </div><!-- /.auto_scroll -->            </div>        </div>    </div></div><!--Modal box--><div class="modal fade" id="print_option_box" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                <h4 class="modal-title" id="exampleModalLabel">Tùy chỉnh in danh sách phòng thi</h4>            </div>            <div class="modal-body">                <form>                    <div class="form-group">                        <label for="message-text" class="control-label">Ngày thi:</label>                        <div class="input-group input-append date datepicker">                            <input type="date" id="txt_exam_date" class="form-control input-sm" value="" placeholder="DD/MM/YYYY">                            <span class="input-group-addon add-on"><i class="glyphicon glyphicon-calendar"></i></span>                        </div>                    </div>                    <div class="form-group">                        <label for="message-text" class="control-label">Thời lượng (phút):</label>                        <input type="number" class="form-control" id="txt_exam_duration" value="30">                    </div><!--                    <div class="form-group" >                        <label for="" class="control-label">Giảng đường:</label>                        <select name="sel_building" id="sel_building" class="form-control input-sm sel_filter">                            <?php                            foreach ($this->arr_building as $key => $value) {                                ?>                                <option value="<?= $key ?>"><?= $value ?></option>                            <?php } ?>                        </select>                    </div>                    <div class="form-group" >                        <label for="" class="control-label">Phòng thi:</label>                        <select name="sel_room" id="sel_room" class="form-control input-sm sel_filter">                            <option value="0">-Chưa xác định-</option>                        </select>                    </div>-->                </form>            </div>            <div class="modal-footer">                <button type="button" id="btn_exc_print" class="btn btn-primary"><i class="glyphicon glyphicon-print"></i> In danh sách</button>                <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>            </div>        </div>    </div></div><!-- Js app functions --><script type="text/javascript">    function load_page() {        validate_select();    }    function enable(item) {        $(item).prop('disabled', false);    }    function disable(item) {        $(item).prop('disabled', true);    }    function validate_select() {        var sel_course = $("#sel_course").val();        var sel_exam = $("#sel_exam").val();        var sel_subject = $("#sel_subject").val();        if (sel_course == 0) {            disable("#sel_exam");        }        if (sel_exam == 0) {            disable("#sel_subject");        }        if (sel_subject == 0) {            disable("#sel_exam_list");        }    }    // Tạo phòng thi tự động    function create_room_list_auto(num) {        var total = parseInt($("#txt_num_student").val());        var spr = Math.floor(total / num);        var odd = total % num;        //console.log("num=" + num + "; total=" + total);        if (num <= total) {            $("#tbl_room_list > thead").html("");            $("#tbl_room_list > tbody").html("");            var rh = "<tr><th>Phòng</th><th>Số sinh viên</th><th>Địa điểm thi</th></tr>";            $('#tbl_room_list > thead').append(rh);            for (i = 1; i <= num; i++) {                var tmp = i <= odd ? spr + 1 : spr;                // console.log("tmp=" + tmp);                var r = "";                r += "<tr  id='room_" + i + "' class='row_room' disabledonclick='' >";                r += "<td> Phòng thi số " + i + "</td>";                r += "<td> <input disabled type='number' id='txt_num_student_room_" + i + "' value='" + tmp + "' id=''  /> </td>";                r += "<td>";                r += get_sel_room(i, 0);                r += "</td>";                r += "</tr>";                //console.log('row: ' + r);                $('#tbl_room_list > tbody').append(r);            }            noticeMeseage.hide();        } else {            noticeMeseage.show("Số lượng phòng thi cần tạo không hợp lệ.", "danger");        }    }    // Chọn phòng thi     function select_room(room) {        var num_room = $("#num_room").val();        var id_exam_list = $("#sel_exam_list").val();        load_room_list(id_exam_list, num_room, room);    }    // Tạo phòng thi thủ cộng    function create_room_list(num) {        var total = parseInt($("#txt_num_student").val());        var spr = Math.floor(total / num);        var odd = total % num;        console.log("num=" + num + "; total=" + total);        if (num <= total) {            $("#tbl_room_list > thead").html("");            $("#tbl_room_list > tbody").html("");            var rh = "<tr><th>Phòng</th><th>Số sinh viên</th><th>Địa điểm thi</th></tr>";            $('#tbl_room_list > thead').append(rh);            for (i = 1; i <= num; i++) {                var tmp = i <= odd ? spr + 1 : spr;                // console.log("tmp=" + tmp);                var r = "";                r += "<tr id='room_" + i + "' class='row_room' onclick='' >";                r += "<td> Phòng thi số " + i + "</td>";                r += "<td> <input type='number' id='txt_num_student_room_" + i + "' value='" + tmp + "' id='' onchange='re_cal_room()'  /> </td>";                r += "<td>";                r += get_sel_room(i, 0);                r += "</td>";                r += "</tr>";                //console.log('row: ' + r);                $('#tbl_room_list > tbody').append(r);            }        } else {            noticeMeseage.show("Số lượng phòng thi cần tạo không hợp lệ.", "danger");        }    }    // hàm trả về chuỗi lưu danh sách phòng thi    function get_str_save_room(type) {        var str_result = "";        var str_add = "";        var num_room = type == 1 ? $("#num_room_auto").val() : $("#num_room_hand").val();        if (num_room <= 0) {            noticeMeseage.show("Số phòng không hợp lệ", "danger");            return;        }        for (i = 1; i <= num_room; i++) {            var spr = $("#txt_num_student_room_" + i).val();            var add = $("#sel_address_room_" + i).val();            if (spr <= 0) {                noticeMeseage.show("Số phòng không hợp lệ", "danger");                return;            }            str_result += spr + ";";            str_add += add + ";";        }        str_result.substring(0, str_result.length - 2);        console.log("str_result=" + str_result);        str_add.substring(0, str_add.length - 1);        return str_result + "#" + str_add;    }    // Hàm tính lại số sinh viên tự động    function re_cal_room() {        var type = $("#split_type").val();        var num = type == 1 ? $("#num_room_auto").val() : $("#num_room_hand").val();        var total = $("#txt_num_student").val();        var sum = 0;        for (var i = 1; i <= num; i++) {            if (i < num) {                if (parseInt($("#txt_num_student_room_" + i).val()) > 0) {                    sum += parseInt($("#txt_num_student_room_" + i).val());                } else {                    noticeMeseage.show("Chia phòng không hợp lệ!", "danger");                    create_room_list(num);                    return;                }            } else {                var last = total - sum;                console.log("last=" + last);                if (last > 0) {                    $("#txt_num_student_room_" + i).val(last);                } else {                    noticeMeseage.show("Chia phòng không hợp lệ!", "danger");                    create_room_list(num);                    return;                }            }        }    }    function get_sel_room(room, id) {        var sel = "<select id='sel_address_room_" + room + "' >";        var str_item = $("#hdd_all_room").val();        var arr_item = str_item.split("#");        $.each(arr_item, function (key, value) {            var item = value.split(";");            if (id == item[0]) {                sel += "<option value='" + item[0] + "' selected > " + item[1] + "</option>";            } else {                sel += "<option value='" + item[0] + "' > " + item[1] + "</option>";            }        });        sel += "</select>";        return sel;    }    function get_add_name(id) {        var st="";        var str_item = $("#hdd_all_room").val();        var arr_item = str_item.split("#");        $.each(arr_item, function (key, value) {            var item = value.split(";");//            console.log("Item: " + id + "-" + item[0]);            if (id == item[0]) {                st=item[1];                return;            }        });        return st;    }</script><!-- Js Ajax --> <script type="text/javascript">    var ajaxUrl = "<?= AppObject::getBaseFile('app/exam_room/helpers/ajax.php') ?>";    // load select Exam    function load_exam(id_course) {        var str_post_data = id_course;        $.post(ajaxUrl, {act: 'load_exam', str_post_data: str_post_data}, function (str_response_data) {            //console.log("str_response_data=" + str_response_data);            var data = $.parseJSON(str_response_data);            var str_data = data.returndata;            var row_gf = str_data.split('#');            $('#sel_exam').find('option:not(:first)').remove();            $.each(row_gf, function (key, value) {                var tmp = value.split(';');                //console.log('tmp: '+ tmp);                if (tmp[0] !== null && tmp[0] !== "") {                    $('#sel_exam').append('<option value="' + tmp[0] + '">' + tmp[1] + '</option>');                }            });            enable("#sel_exam");        });    }    // load subject    function load_subject(id_exam) {        var str_post_data = id_exam;        $.post(ajaxUrl, {act: 'load_subject', str_post_data: str_post_data}, function (str_response_data) {            //console.log("str_response_data=" + str_response_data);            var data = $.parseJSON(str_response_data);            var str_data = data.returndata;            var row_gf = str_data.split('#');            $('#sel_subject').find('option:not(:first)').remove();            $.each(row_gf, function (key, value) {                var tmp = value.split(';');                //console.log('tmp: '+ tmp);                if (tmp[0] !== null && tmp[0] !== "") {                    $('#sel_subject').append('<option value="' + tmp[0] + '">' + tmp[1] + '</option>');                }            });            enable("#sel_subject");        });    }    // load exam_list    function load_exam_list(id_exam, id_subject) {        var str_post_data = id_exam + ";" + id_subject;        $.post(ajaxUrl, {act: 'load_exam_list', str_post_data: str_post_data}, function (str_response_data) {            //console.log("str_response_data=" + str_response_data);            var data = $.parseJSON(str_response_data);            var str_data = data.returndata;            var row_gf = str_data.split('#');            $('#sel_exam_list').find('option:not(:first)').remove();            $.each(row_gf, function (key, value) {                var tmp = value.split(';');                if (tmp[0] !== null && tmp[0] !== "") {                    $('#sel_exam_list').append('<option value="' + tmp[0] + '">' + tmp[1] + '</option>');                }            });            enable("#sel_exam_list");        });    }    // Load thông tin danh sách thi    function load_list_info(id_exam_list) {        var str_post_data = id_exam_list;        $.post(ajaxUrl, {act: 'load_list_info', str_post_data: str_post_data}, function (str_response_data) {            //console.log("str_response_data=" + str_response_data);            var data = $.parseJSON(str_response_data);            var str_data = data.returndata;            var row_gf = str_data.split('#');            //console.log('row_gf: ' + row_gf[0]);            var tmp = row_gf[0].split(';');            $('#txt_num_student').val(tmp[1]);            tmp = row_gf[1].split(';');            $('#lbl_exam_list').html(tmp[1]);            tmp = row_gf[3].split(';');            $('#hdd_exam_type').val(tmp[1]);//            console.log("tmp="+tmp);            var type = tmp[1] == 0 ? "Trắc nghiệm" : "Tự luận";            $('#lbl_exam_type').html(type);        });    }    // Load danh sách phòng thi    function load_room_list(id_exam_list) {        var str_post_data = id_exam_list;//         console.log('str_post_data: '+ str_post_data);        $.post(ajaxUrl, {act: 'load_room', str_post_data: str_post_data}, function (str_response_data) {            var data = $.parseJSON(str_response_data);//            console.log('str_response_data: ' + str_response_data);            $("#table_student > tbody").html("");            var str_data = data.returndata;//            console.log('str_data: ' + str_data);            var room = str_data.split('%');            var n = 0;            var nr = 1;            $.each(room, function (key1, value1) {                $('#th_num_room').html("Phòng thi số: " + nr);                $('#th_room_address').html("Địa điểm thi: " + nr);                var room_list = value1.split('#');                var n = 0;                $.each(room_list, function (key, value) {                    var tmp = value.split(';');                    // tmp:0['id_student'] .1['student_code'] .2['last_name'] .3['first_name'].4. birthday.5. id_exam_list                    n++;                    if (tmp[0] !== null && tmp[0] !== "") {                        var r = "";                        r += "<tr>";                        r += "<td>" + n + "</td>";                        r += "<td>" + tmp[1] + "</td>";                        r += " <td>" + tmp[2] + "</td>";                        r += "<td>" + tmp[3] + "</td>";                        r += "<td>" + tmp[4] + "</td>";                        r += " </tr>";                        //console.log('row: '+ r);                        $('#table_student > tbody').append(r);                    }                });                nr++;            });        });    }    // load building_room    function load_building_room(id_building) {        var str_post_data = id_building;        $.post(ajaxUrl, {act: 'load_building_room', str_post_data: str_post_data}, function (str_response_data) {            //console.log("str_response_data=" + str_response_data);            var data = $.parseJSON(str_response_data);            var str_data = data.returndata;            var row_gf = str_data.split('#');            $('#sel_room').find('option:not(:first)').remove();            $.each(row_gf, function (key, value) {                var tmp = value.split(';');                //console.log('tmp: '+ tmp);                if (tmp[0] !== null && tmp[0] !== "") {                    $('#sel_room').append('<option value="' + tmp[0] + '">' + tmp[1] + '</option>');                }            });        });    }    // Lưu danh sách phòng thi    function save_room(id_exam_list, str_save) {        var str_post_data = id_exam_list + "#" + str_save;//         console.log('str_post_data: '+ str_post_data);        $.post(ajaxUrl, {act: 'save_room', str_post_data: str_post_data}, function (str_response_data) {            var data = $.parseJSON(str_response_data);            noticeMeseage.show(data.message, data.status);        });    }    // Load danh sách phòng thi    function load_room(id_exam_list) {        var str_post_data = id_exam_list;        $.post(ajaxUrl, {act: 'load_room', str_post_data: str_post_data}, function (str_response_data) {            var data = $.parseJSON(str_response_data);//            console.log('str_response_data: ' + str_response_data);            $("#table_room").html("");            var str_data = data.returndata;            var str_add = data.room;            var arr_add = str_add.split(";");//            console.log('str_data: ' + str_data);            var room = str_data.split('%');            var n = 0;            var nr = 1;            $.each(room, function (key1, value1) {                var str = "";                str += "<table id='table_student' class='table table-striped' data-toggle='table' data-height='550'>";                str += "<thead> ";                str += " <tr class='row_title'>";                str += " <th colspan='3' id='th_num_room'>Phòng thi số: " + nr + "</th>";                str += " <th colspan='2' id='th_room_address'>Địa điểm thi: ";//                console.log("id_rom=" + arr_add[nr - 1]);                str += get_add_name(arr_add[nr - 1]);                str += "</th>";                str += " </tr>";                str += "<tr>";                str += " <th>STT</th>";                str += " <th>Mã SV</th>";                str += "  <th>Họ</th>";                str += "  <th>Tên</th>";                str += "  <th>Ngày sinh</th>";                str += " </tr>";                str += "</thead>";                str += "<tbody>";                var room_list = value1.split('#');                var n = 0;                $.each(room_list, function (key, value) {                    var tmp = value.split(';');                    // tmp:0['id_student'] .1['student_code'] .2['last_name'] .3['first_name'].4. birthday.5. id_exam_list                    n++;                    if (tmp[0] !== null && tmp[0] !== "") {                        var r = "";                        str += "<tr>";                        str += "<td>" + n + "</td>";                        str += "<td>" + tmp[1] + "</td>";                        str += " <td>" + tmp[2] + "</td>";                        str += "<td>" + tmp[3] + "</td>";                        str += "<td>" + tmp[4] + "</td>";                        str += " </tr>";                        //console.log('row: '+ r);                        $('.table_student > tbody').append(r);                    }                });                nr++;                str += "</tbody>";                str += " </table>";                $('#table_room').append(str);            });            create_room_list(nr - 1);        });    }</script><!-- Js Function already --> <script type="text/javascript">    (function () {        load_page();        // Select khóa        $('#form_filter').on('change', '#sel_course', function () {            validate_select();            var id_course = $("#sel_course").val();            if (id_course !== "0") {                load_exam(id_course);            }        });        // Select đợt thi        $('#form_filter').on('change', '#sel_exam', function () {            validate_select();            var id_exam = $("#sel_exam").val();            if (id_exam !== "0") {                load_subject(id_exam);            }        });        // Select đợt thi        $('#form_filter').on('change', '#sel_subject', function () {            var id_exam = $("#sel_exam").val();            var id_subject = $("#sel_subject").val();            validate_select();            if (id_exam !== "0" && id_subject !== "0") {                load_exam_list(id_exam, id_subject);            }        });        // Select đợt thi        $('#form_filter').on('change', '#sel_subject', function () {            var id_exam = $("#sel_exam").val();            var id_subject = $("#sel_subject").val();            validate_select();            if (id_exam !== "0" && id_subject !== "0") {                load_exam_list(id_exam, id_subject);            }        });        // Select danh sách thi        $('#form_filter').on('change', '#sel_exam_list', function () {            validate_select();            var id_exam_list = $("#sel_exam_list").val();            if (id_exam_list !== "0") {                load_list_info(id_exam_list);                load_room(id_exam_list);            }        });        // Select giảng đường        $('#print_option_box').on('change', '#sel_building', function () {            var id_building = $("#sel_building").val();            if (id_building !== "0") {                load_building_room(id_building);            }        });        // Chọn chia phòng tự động        $(".collapseOne").click(function () {            $("#tbl_room_list > tbody").html("");            $("#split_type").val("1");            //console.log("Split_type=" + $("#split_type").val());        });        // Chọn chia phòng thủ công        $(".collapseTwo").click(function () {            $("#tbl_room_list > tbody").html("");            $("#split_type").val("2");            //console.log("Split_type=" + $("#split_type").val());        });        // click tạo phòng        $('.action_table').on('click', '#btn_split', function () {            var type = $("#split_type").val();            if (type == 1) {                var num_room = $("#num_room_auto").val();                //console.log("num_room_auto=" + num_room);                if (num_room !== 0) {                    create_room_list_auto(num_room);                }            } else {                var num_room = $("#num_room_hand").val();                //console.log("num_room_hand=" + num_room);                if (num_room !== 0) {                    create_room_list(num_room);                }            }        });        // click nút lưu phòng        $('.action_table').on('click', '#btn_save_room', function () {            //console.log("save click!");            var type = $("#split_type").val();            var id_exam_list = $("#sel_exam_list").val();            var str_save = get_str_save_room(type);            save_room(id_exam_list, str_save);            load_room(id_exam_list);        });        // Click Print        $('#print_option_box').on('click', '#btn_exc_print', function () {            var id_exam_list = $("#sel_exam_list").val();            var exam_date = $("#txt_exam_date").val();            var exam_duration = $("#txt_exam_duration").val();            var type = $("#hdd_exam_type").val();            var id_building = $("#sel_building").val();            var id_room = $("#sel_room").val();            var downloadUrl = "<?= AppObject::getBaseFile('app/exam_room/helpers/download.php') ?>";            if (id_exam_list != 0) {                $.download(downloadUrl, "id_exam_list=" + id_exam_list + "&exam_date=" + exam_date + "&exam_duration=" + exam_duration + "&type=" + type + "&id_building=" + id_building + "&id_room=" + id_room, 'get');            } else {                modalMesseage.show("Danh sách phòng thi không hợp lệ!");            }        });    })(jQuery);</script>