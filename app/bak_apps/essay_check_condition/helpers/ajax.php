<?phpdefine('AREA', 'A');require '../../../init.php';require_once ('../essay_check_condition.php');$act = isset($_POST['act']) ? substr(trim($_POST['act']), 0, 30) : "";switch ($act) {    case 'load_class':        $status = "";        $message = "";        $returndata = "";        $str_returndata = "";        $str_data = isset($_POST['str_post_data']) ? trim($_POST['str_post_data']) : "";        $arr_data = explode(";", $str_data);        $id_course = isset($arr_data[0]) ? $arr_data[0] : "";        $id_group_field = isset($arr_data[1]) ? $arr_data[1] : "";        $arr_result = Essay_check_conditionApp::get_select_table("class", "id", "class_name", array("id_course" => $id_course, "id_group_field" => $id_group_field));        //print_r($arr_result);        foreach ($arr_result as $key => $value) {            $row = $key . ";" . $value;            $str_returndata.=$row . "#";        }        $str_returndata = rtrim($str_returndata, '#');        echo json_encode(array('status' => $status, 'message' => $message, 'returndata' => $str_returndata));        break;    case 'load_student':        $status = "";        $message = "";        $returndata = "";        $str_returndata = "";        $str_data = isset($_POST['str_post_data']) ? trim($_POST['str_post_data']) : "";        $arr_data = explode(";", $str_data);        $id_class = isset($arr_data[0]) ? $arr_data[0] : "";        $arr_result = Essay_check_conditionApp::get_arr_student($id_class);//        print_r($arr_result);        foreach ($arr_result as $key => $value) {            $row = $value['student_code'] . ";" . $value['id'] . ";" . $value['first_name'] . ";" . $value['last_name'] . ";" .                    $value['birthday'] . ";" . $value['major_name']. ";" . $value['essay_stt'];            $str_returndata.=$row . "#";        }        $str_returndata = rtrim($str_returndata, '#');        echo json_encode(array('status' => $status, 'message' => $message, 'returndata' => $str_returndata));        break;    case 'check_condition':        $status = "";        $message = "";        $returndata = "";        $str_returndata = "";        $str_data = isset($_POST['str_post_data']) ? trim($_POST['str_post_data']) : "";        $arr_data = explode(";", $str_data);        $id_class = isset($arr_data[0]) ? $arr_data[0] : "";        $arr_result = Essay_check_conditionApp::get_arr_student($id_class);//        print_r($arr_result);        foreach ($arr_result as $key => $value) {            $arr_check = Essay_check_conditionApp::check_condition_essay($value['id']);            $row = $value['student_code'] . ";" . $value['id'] . ";" . $value['first_name'] . ";" . $value['last_name'] . ";" .                    $value['birthday'] . ";" . $value['major_name'] . ";" . $arr_check['value'] . ";" . $arr_check['messeage'];            $str_returndata.=$row . "#";        }        $str_returndata = rtrim($str_returndata, '#');        echo json_encode(array('status' => $status, 'message' => $message, 'returndata' => $str_returndata));        break;    case 'save_condition':        $status = "";        $message = "";        $returndata = "";        $str_returndata = "";        $str_data = isset($_POST['str_post_data']) ? trim($_POST['str_post_data']) : "";        $arr_data = explode(";", $str_data);        $id_class = isset($arr_data[0]) ? $arr_data[0] : "";        $arr_result = Essay_check_conditionApp::get_arr_student($id_class);//        print_r($arr_result);        foreach ($arr_result as $key => $value) {            $arr_check = Essay_check_conditionApp::save_essay_status($value['id']);        }        echo json_encode(array('status' => $status, 'message' => $message, 'returndata' => $str_returndata));        break;}?>